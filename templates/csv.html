{% extends "base.html" %}

   {% block content %}
         <div class="main">
           <form action="{{ url_for('csv_list', id_usuario=id_usuario) }}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
             <div class="mb-3">
               <label for="arquivo_csv" class="form-label">Selecione um arquivo CSV:</label>
               <div class="input-group">
                 <input type="file" name="arquivo_csv" id="arquivo_csv" accept=".csv" class="form-control">
                 <div class="invalid-feedback">
                   Por favor selecione um arquivo CSV v√°lido.
                 </div>
               </div>
               {% with messages = get_flashed_messages(with_categories=true) %}
               {% if messages %}
               {% for category, message in messages %}
               <div class="alert alert-{{ category }}">
                 {{ message }}
               </div>
               {% endfor %}
               {% endif %}
               {% endwith %}
             </div>
             <button type="submit" class="btn btn-primary">Enviar</button>
           </form>
           <br>
           <br>
            <div>
              <table>
                <thead>
                    <tr>
                        <th> Id </th>
                        <th> Nome Arquivo </th>
                        <th> Dados Gerais </th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in arquivos %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.nome_arquivo }}</td>
                            <td><a href="{{ url_for('dashboard', id_usuario=item.usuario_id, id=item.id) }}" class="btn btn-primary" >Visualizar</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            </div>
          </div>
   {% endblock %}
